"use strict";angular.module("angularFlickrApp",["ngRoute","FlickrAPI"]).config(["$routeProvider","FlickrProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/:photoset_title/:photoset_id",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"}),b.setApiKey("bab05ea17002c5f9f458a145df6ff286"),b.setUserId("66052014@N08")}]).run(["$rootScope",function(a){a.photosets=[],a.about=!1,a.contact=!1}]),angular.module("angularFlickrApp").controller("MainCtrl",["$rootScope","$scope","$window","$document","$routeParams","Flickr","facebookConfig",function(a,b,c,d,e,f,g){var h="url_l";a.currentPhotoset=e.photoset_id||"72157627503614426",b.windowHeight=c.innerHeight||d.documentElement.clientHeight,b.windowHeight<768&&(h="url_z"),a.photosets&&a.photosets[a.currentPhotoset]?b.photoset=a.photosets[a.currentPhotoset]:f.getSet(a.currentPhotoset,h).then(function(c){b.photoset=c.photoset,a.photosets[a.currentPhotoset]=c.photoset}),b.sharePictureFacebook=function(a,b){FB.ui({method:"feed",link:window.location.href,picture:a,name:b,caption:g.caption,description:g.description})},b.sharePicturePinterest=function(a,b){window.open("http://www.pinterest.com/pin/create/button/?url="+encodeURIComponent(window.location.href)+"&media="+encodeURIComponent(a)+"&description="+encodeURIComponent(b),"Share on Pinterest","width=700,height=300,top="+(screen.height-300)/2+",left="+(screen.width-700)/2)}}]),angular.module("FlickrAPI",[]).provider("Flickr",function(){var a="https://api.flickr.com/services/rest/?format=json",b="",c="",d="url_l";this.setApiKey=function(a){b=a||b},this.setUserId=function(a){c=a||c},this.$get=["$q","$http",function(e,f){var g={getCollections:function(){var d=e.defer();return f({method:"JSONP",url:a,params:{api_key:b,user_id:c,jsoncallback:"JSON_CALLBACK",method:"flickr.collections.getTree"}}).success(function(a){d.resolve(a)}).error(function(a){d.reject(a)}),d.promise},getSet:function(c,g){var h=e.defer();return f({method:"JSONP",url:a,params:{api_key:b,photoset_id:c,jsoncallback:"JSON_CALLBACK",method:"flickr.photosets.getPhotos",extras:g||d}}).success(function(a){h.resolve(a)}).error(function(a){h.reject(a)}),h.promise}};return g}]}),angular.module("angularFlickrApp").controller("GallerylistCtrl",["$rootScope","$scope","Flickr",function(a,b,c){b.currentGallery=null,b.setCurrentGallery=function(a){b.currentGallery=a},b.isCurrentGallery=function(b){return a.currentPhotoset===b},c.getCollections().then(function(a){b.collections=a.collections})}]),angular.module("angularFlickrApp").constant("facebookConfig",{caption:"Hreniuc Alexandru",description:"http://www.facebook.com/fotohreniuc | www.alexhreniuc.ro | tel: 0040744586226"}),angular.module("angularFlickrApp").controller("ContactformCtrl",["$rootScope","$scope","$http",function(a,b,c){b.formData={},b.submit=function(){c({method:"POST",url:"send.php",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){var b=[];for(var c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},data:this.formData}).success(function(){a.contact=!1,alert("Message sent! Thank you!")})}}]);